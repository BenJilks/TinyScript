mod tinylib
sysfunc println

mod test
load tinylib as 0

func add
PUSH_ARG 0
PUSH_ARG 1
ADD
RETURN

func fib
PUSH_ARG 0
PUSH_INT 2
LARGER_THAN
JUMP_IF_NOT else
PUSH ARG 0
PUSH_INT 1
SUB
CALL fib
PUSH ARG 0
PUSH_INT 2
SUB
CALL fib
ADD
RETURN
else:
PUSH_INT 1
RETURN

func main
PUSH_STRING "Fib of 21 is: "
PUSH_INT 21
CALL fib
CALL_MOD 0(tinylib) 0(println)
